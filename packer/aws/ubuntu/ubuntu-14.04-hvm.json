{
    "variables": {
        "disk_size": "10",
        "project_id": "angular-expanse-99923",
        "account_file": "/home/abakshi/Project.json",
        "source_image": "ubuntu-1404-trusty-v20160314",
        "source_ami": "ami-9abea4fb",
        "aws_access_key": "{{env `AWS_ACCESS_KEY_ID`}}",
        "aws_secret_key": "{{env `AWS_SECRET_ACCESS_KEY`}}"
    },

    "builders":
    [
        {
            "type": "amazon-ebs",
            "access_key": "{{user `aws_access_key`}}",
            "secret_key": "{{user `aws_secret_key`}}",
            "region": "us-west-2",
            "source_ami": "{{ user `source_ami`}}",
            "instance_type": "t2.large",
            "iam_instance_profile": "ec2-default",
            "security_group_ids": [
                "sg-b8cb3ddc",
                "sg-84db4ee2"
            ],
            "ssh_username": "ubuntu",
            "ami_name": "xcbuilder-ubuntu-1404-{{timestamp}}",
            "ami_description": "Xcalar Build Image (Ubuntu 14.04)",
            "tags": { "role": "xcbuilder", "osrelease": "trusty" }
        },
        {
            "type": "googlecompute",
            "account_file": "{{ user `account_file`}}",
            "project_id": "{{ user `project_id`}}",
            "source_image": "{{ user `source_image`}}",
            "zone": "us-central1-a",
            "image_name": "xcbuilder-ubuntu-1404-{{timestamp}}",
            "instance_name": "packer-xcbuilder-ubuntu-1404-{{timestamp}}",
            "machine_type": "n1-highcpu-16",
            "disk_type": "pd-ssd",
            "disk_size": "{{ user `disk_size`}}",
            "preemptible": false,
            "tags": [ "xcbuilder","trusty" ]
        }
    ],

    "provisioners": [
        {
            "type": "shell",
            "execute_command": "{{.Vars}} sudo -E -S bash '{{.Path}}'",
            "scripts": [
                "scripts/update.sh",
                "scripts/packages.sh",
                "scripts/docker.sh",
                "scripts/provision.sh",
                "scripts/install_unixOdbc.sh",
                "scripts/setupOdbcMysql.sh",
                "scripts/finish.sh"
            ]
        }
    ]
}
